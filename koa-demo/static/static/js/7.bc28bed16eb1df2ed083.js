webpackJsonp([7],{ihKu:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("4YfN"),r=a.n(s),l=a("9rMa"),o={name:"MsgDetail",data:function(){return{type:"create",imageUrl:"",fullscreenLoading:!1,form:{title:"",desc:"",smImg:"",fullImg:"",type:"pc"},rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"},{min:3,max:64,message:"长度在 3 到 64 个字符",trigger:"blur"}]}}},conpuntd:{},metaInfo:{title:"消息列表"},methods:r()({},Object(l.b)("design",["createItem","getItem","updateItem"]),{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var a=r()({},t.form);"create"==t.type?t.createItem(a).then(function(e){e.isSuccess?(t.$message("添加成功!"),t.$router.push({name:"designlist"})):t.$message("添加失败!")}):t.updateItem(a).then(function(e){e.isSuccess?(t.$message("修改成功!"),t.$router.push({name:"designlist"})):t.$message("修改失败!")})})},goList:function(){this.$router.push({name:"designlist"})},smImgSuccess:function(e){this.form.smImg=e.key},fullImgSuccess:function(e){this.form.fullImg=e.key},beforeAvatarUpload:function(e){var t=e.size/1024/1024<100;return t||this.$message.error("上传头像图片大小不能超过 100MB!"),t}}),mounted:function(){var e=this;if(this.type=this.$route.params.id,"create"!==this.$route.params.id){var t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});e.getItem({id:this.$route.params.id}).then(function(a){t.close(),a.isSuccess?(e.form.id=a.data._id,e.form.title=a.data.title,e.form.author=a.data.author,e.form.desc=a.data.desc,e.form.smImg=a.data.smImg,e.form.fullImg=a.data.fullImg):e.$message(a.data)})}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"form",staticClass:"design",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"作者"}},[a("el-input",{model:{value:e.form.author,callback:function(t){e.$set(e.form,"author",t)},expression:"form.author"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{attrs:{placeholder:"请选择作品类型"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{attrs:{label:"pc作品",value:"pc"}}),e._v(" "),a("el-option",{attrs:{label:"手机作品",value:"mc"}}),e._v(" "),a("el-option",{attrs:{label:"其他",value:"other"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图标"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"api/upload/file?lib=hc","show-file-list":!1,"on-success":e.smImgSuccess,"before-upload":e.beforeAvatarUpload}},[e.form.smImg?a("img",{directives:[{name:"src",rawName:"v-src",value:e.form.smImg,expression:"form.smImg"}],staticClass:"avatar"}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"设计稿"}},[a("el-upload",{staticClass:"design-uploader",attrs:{action:"api/upload/file?lib=hc","show-file-list":!1,"on-success":e.fullImgSuccess,"before-upload":e.beforeAvatarUpload}},[e.form.fullImg?a("img",{directives:[{name:"src",rawName:"v-src",value:e.form.fullImg,expression:"form.fullImg"}],staticClass:"design"}):a("i",{staticClass:"el-icon-plus design-uploader-icon"})])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("form")}}},[e._v(" "+e._s("create"==e.type?"立即创建":"提交"))]),e._v(" "),a("el-button",{on:{click:e.goList}},[e._v("取消")])],1)],1)},staticRenderFns:[]};var m=a("Z0/y")(o,i,!1,function(e){a("qDcX")},"data-v-2b7da5ae",null);t.default=m.exports},qDcX:function(e,t){}});
//# sourceMappingURL=7.bc28bed16eb1df2ed083.js.map